{% extends "servicemanager/base.html" %}
{% block title %}<title>Customer Card</title>{% endblock %}
{% block content %}
<div class="wrapper">
    <div class="manage-customer-form">
        <div class="form-title"><strong>Customer card</strong></div>

        <div class="form-header">
            <div class="form-header-title"><strong>Personal data</strong></div>
            <div class="my-btn-group">
                <a href="{% url 'manager:update_customer' customer.pk %}" class="my-btn my-btn-edit">Edit</a>
                {% if can_delete %}
                <button class="my-btn my-btn-delete" id="delCustomerLink">Delete</button>
                {% else %}
                <button class="my-btn my-btn-disabled" disabled>Delete</button>
                {% endif %}
            </div>
        </div>
        <div class="form-card">
            <div class="mul-fields">
                <div class="output">
                    <span class="card-label">Name:</span> {{ customer.first_name }} {{ customer.last_name }}
                </div>
                <div class="output">
                    <span class="card-label">Date of birth:</span> {{ customer.birth_date }}
                </div>
            </div>

            <div class="mul-fields">
                <div class="output">
                    <span class="card-label">Phone number:</span> +{{ customer.phone }}
                </div>
                <div class="output">
                    <span class="card-label">E-mail:</span> {{ customer.email }}
                </div>
            </div>

            <div class="output">
                <div style="padding-bottom: 10px;">
                    <span class="card-label">Address:</span>
                </div>
                <div>{{ customer.house }}, {{ customer.street }}<br>
                {{ customer.city }}, {{ customer.state }}<br>
                {{ customer.country }}, {{ customer.postal_code }}</div>
            </div>
        </div>

        <div class="form-header mul-fields">
            <div class="form-header-title"><strong>Cars ({{ vehicles|length }})
                <a href="{% url 'manager:create_vehicle' customer.id %}"
                   class="add-link" title="Add a car"> &#43;</a></strong>
<!--                <a href="{% url 'manager:create_vehicle' customer.pk %}" class="my-btn my-btn-edit">Add</a>-->
            </div>
<!--            <div class="my-btn-group">-->
<!--                <a href="{% url 'manager:create_vehicle' customer.pk %}" class="my-btn my-btn-edit">Add</a>-->
<!--            </div>-->
        </div>

<!--        <form action="{# url 'manager:create_vehicle' customer.pk #}" method="post" class="form-card">-->
<!--            {# csrf_token #}-->
<!--            <div class="mul-fields">-->
<!--                <input type="hidden" name="owner" required class="input" value="{# customer.id #}">-->
<!--                <input type="text" name="make" required class="input" placeholder="Make">-->
<!--                <input type="text" name="model" required class="input" placeholder="Model">-->
<!--            </div>-->
<!--            <div class="mul-fields">-->
<!--                <input type="text" name="year" required class="input" placeholder="Year">-->
<!--                <input type="text" name="vin" required class="input" placeholder="VIN">-->
<!--            </div>-->
<!--            <div class="single-field">-->
<!--                <input type="submit" value="Add" class="my-btn my-btn-save">-->
<!--            </div>-->
<!--        </form>-->


    </div>
</div>

<!-- The Modal -->
<div id="confirmModal" class="my-modal">

  <!-- Modal content -->
    <div class="my-modal-content">
        <span class="close">&times;</span><!--<span aria-hidden="true">Ã—</span>-->
        <div><b>Confirm deletion</b></div>

        <form action="{% url 'manager:delete_customer' customer.pk %}"
              method="post" class="delete-customer-form"> {% csrf_token %}

            <div class="modal-msg">Are you sure you want to delete the customer? <br>
                All data on related cars and orders will be deleted as well.</div>
            <div class="modal-btn-group">
                <span class="my-btn modal-btn-cancel">Cancel</span>
<!--                <a href="{% url 'manager:update_customer' customer.pk %}"-->
<!--                  class="my-btn modal-btn-delete">Delete</a>-->
                <input name="delete" type="submit" value="Delete" class="my-btn modal-btn-delete">
            </div>
        </form>
    </div>

</div>

{% endblock %}